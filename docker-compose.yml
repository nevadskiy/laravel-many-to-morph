version: '3.8'

services:
    composer:
        image: composer:latest
        environment:
            COMPOSER_CACHE_DIR: /app/.cache/composer
            COMPOSER_PREFER_STABLE: 1
        volumes:
            - ./:/app
        working_dir: /app

    phpunit:
        image: ${PHPUNIT_IMAGE:-php:8.1-cli}
        volumes:
            - ./:/app
        working_dir: /app
        entrypoint: vendor/bin/phpunit
